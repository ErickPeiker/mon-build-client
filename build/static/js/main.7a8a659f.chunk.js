(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{506:function(e){e.exports={"3 hours":"3 horas","6 hours":"6 horas","12 hours":"12 horas","5 minutes":"5 minutos","10 minutes":"10 minutos","30 minutes":"30 minutos","add widget":"Adicionar Widget",add:"Adicionar",administrator:"Administrador","auto refresh":"Atualiza\xe7\xe3o autom\xe1tica",advancedtable:"Tabela Avan\xe7ada",advancedgraphic:"Gr\xe1fico Avan\xe7ado",birthdate:"Data de Nascimento",bits:"Bits",cancel:"Cancelar","chart type":"Tipo do Gr\xe1fico",chart:"Gr\xe1fico",client:"Cliente",cnpj:"CNPJ",collectors:"Coletores",companies:"Empresas",company:"Empresa","company data":"Dados da Empresa","company register":"Cadastro de Empresa",cpf:"CPF",dashboard:"Dashboard",day:"Dia",delete:"Deletar","destination ip":"IP de Destino",edit:"Editar",email:"Email","end date":"Data final","equipment type":"Tipo de Equipamento",equipment:"Equipamento",equipments:"Equipamentos",filter:"Filtrar",gender:"G\xeanero",groups:"Grupos",Graphic:"Gr\xe1fico","history time":"Tempo de Hist\xf3rico",hour:"Hora",id:"Id",ie:"IE",ip:"IP","is active":"Ativo",item:"Item",items:"Itens","item quantity":"Quantidade de Item","item type":"Tipo de Item",interval:"Intervalo",login:"Login",logout:"Logout","marital status":"Estado Civil",menus:"Menus",month:"M\xeas",name:"Nome",observation:"Observa\xe7\xe3o",password:"Senha",path:"Caminho","personal data":"Dados Pessoais",port:"Porta",protocol:"Protocolo",report:"Relat\xf3rio",reports:"Relat\xf3rios",resale:"Revenda",rg:"RG",role:"Papel",routes:"Rotas",save:"Salvar","show others":"Mostrar Outros","show data":"Mostrar os dados","show legend":"Mostrar Legenda","source ip":"IP de Origem","start date":"Data In\xedcio","switch company":"Alterar Empresa",switch:"Alterar",type:"Tipo",Table:"Tabela",users:"Usu\xe1rios",user:"Usu\xe1rio","user data":"Dados do Usu\xe1rio",week:"Semana"}},585:function(e,t,a){e.exports=a(883)},880:function(e,t){},883:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),l=a.n(o),c=a(60),i=a(151),u=a(27),m=a(365),s=a(977),p=a(942),d=a(507),f=a(13),b=a(144),E=a(95),g=a(102),h=a(30),y=a(254),O=a.n(y),v=function(e){return e.map(function(e){return Object.keys(e)}).flat(1).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){return{field:e,title:e}})},j=function(e){var t=e.actions,a=e.columns,o=e.data,l=e.loading,c=e.options,i=e.progress,u=e.title,m=Object(f.a)(e,["actions","columns","data","loading","options","progress","title"]),s=Object(n.useState)(!1),p=Object(h.a)(s,2),d=p[0],b=p[1],y=[{icon:d?"close":"filter_list",isFreeAction:!0,onClick:function(){b(!d)}}].concat(Object(g.a)(t));return r.a.createElement(r.a.Fragment,null,!!l&&r.a.createElement(We,{progress:i}),r.a.createElement(O.a,Object.assign({},m,{title:u,columns:a||v(o),data:o,actions:y,options:Object(E.a)({actionsColumnIndex:-1,pageSize:10,pageSizeOptions:[10,20,50,100],search:d},c)})))};j.defaultProps={actions:[],title:""};var x=j,S=function(e){return r.a.createElement(y.MTableGroupRow,e)},w=a(954),C=a(886),k=a(953),A=function(e){var t=e.children,a=e.window,n=Object(k.a)({disableHysteresis:!0,threshold:0,target:a?a():void 0});return r.a.cloneElement(t,{elevation:n?4:0})},T=function(e){return r.a.createElement(A,null,r.a.createElement(w.a,null,r.a.createElement(C.a,null,e.children)))},I=a(367),P=Object(I.a)(function(e){return{leftContent:{flexGrow:1,display:"flex",alignItems:"center"}}}),N=function(e){var t=P();return r.a.createElement("div",{className:t.leftContent},e.children)},F=Object(I.a)(function(e){return{rightContent:{display:"flex",alignItems:"center"}}}),M=function(e){var t=F();return r.a.createElement("div",{className:t.rightContent},e.children)},D=(a(955),a(987)),q=function(e){return r.a.createElement(D.a,e,e.children)},_=a(887),Y=a(957),R=Object(I.a)(function(e){return{icon:{display:"flex",marginRight:10},progress:{marginRight:10}}}),B=function(e){var t=e.icon,a=e.loading,n=Object(f.a)(e,["icon","loading"]),o=R();return r.a.createElement(_.a,Object.assign({variant:"contained"},n),t&&!a&&r.a.createElement("span",{className:o.icon},t),a&&r.a.createElement(Y.a,{size:24,color:"inherit",className:o.progress}),n.children)},G=a(958),J=function(e){return r.a.createElement(G.a,e,e.children)},L=a(959),z=function(e){return r.a.createElement(L.a,e,e.children)},H=a(960),V=function(e){return r.a.createElement(H.a,e,e.children)},W=a(131),U=["#5C6BC0","#42A5F5","#26A69A","#9CCC65","#FFEE58","#FFA726","#EF5350","#EC407A","#AB47BC"],K=a(80),Q=a(81);function Z(){var e=Object(K.a)(["\n  margin-left: auto;\n"]);return Z=function(){return e},e}function X(){var e=Object(K.a)(["\n  height: 10px;\n  width: 10px;\n  border-radius: 50%;\n  display: inline-block;\n  margin-right: 10px;\n"]);return X=function(){return e},e}function $(){var e=Object(K.a)(["\n  min-width: 10px;\n  margin: 0 10px;\n  flex-grow: 1;\n"]);return $=function(){return e},e}function ee(){var e=Object(K.a)(["\n  display: flex;\n  align-items: center;\n"]);return ee=function(){return e},e}function te(){var e=Object(K.a)(["\n  padding: 0;\n  list-style: none;\n"]);return te=function(){return e},e}function ae(){var e=Object(K.a)(["\n  background: rgba(255, 255, 255, 0.8);\n  padding: 5px;\n  border: 1px solid rgba(0,0,0,.125);\n  border-radius: .25rem;\n  box-shadow: 0 2px 15px 0 rgba(0, 0, 0, 0.05);\n"]);return ae=function(){return e},e}function ne(){var e=Object(K.a)(["\n  margin-left: 10px;\n"]);return ne=function(){return e},e}var re=Q.a.div(ne()),oe=Q.a.div(ae()),le=Q.a.ul(te()),ce=Q.a.li(ee()),ie=Q.a.hr($()),ue=Q.a.span(X()),me=Q.a.span(Z()),se=function(e){var t=e.payload;Object(f.a)(e,["payload"]);return r.a.createElement(re,null,r.a.createElement(le,null,!!t&&t.map(function(e,t){return r.a.createElement(ce,{key:t},r.a.createElement(ue,{style:{backgroundColor:e.color}}),r.a.createElement("span",{className:"recharts-item-name"},e.name),r.a.createElement(ie,null),r.a.createElement(me,null,e.value))})))},pe=function(e){var t=e.formatter,a=e.payload,n=(Object(f.a)(e,["formatter","payload"]),a?a.sort(function(e,t){return t.value-e.value}):[]);return r.a.createElement(oe,null,r.a.createElement("p",{className:"recharts-tooltip-label"},"Label"),r.a.createElement(le,null,n.map(function(e,a){return r.a.createElement(ce,{key:a},r.a.createElement(ue,{style:{backgroundColor:e.color}}),r.a.createElement("span",{className:"recharts-item-name"},e.dataKey),r.a.createElement(ie,null),r.a.createElement(me,null,t(e.value)))})))},de=function(e){var t=e.data,a=e.height,n=e.legendLimit,o=e.onClick,l=e.valueFormatter,c=(Object(f.a)(e,["data","height","legendLimit","onClick","valueFormatter"]),t.map(function(e){return Object.keys(e)}).flat(1).filter(function(e,t,a){return a.indexOf(e)===t}).filter(function(e){return"key"!==e}).sort(function(e,a){return t.reduce(function(e,t){return e+(t[a]||0)},0)-t.reduce(function(t,a){return t+(a[e]||0)},0)}));return r.a.createElement(W.e,{height:a},r.a.createElement(W.d,{data:t},r.a.createElement(W.a,null),r.a.createElement(W.g,{dataKey:"key"}),r.a.createElement(W.h,{tickFormatter:l}),r.a.createElement(W.f,{content:pe,formatter:l,isAnimationActive:!1}),r.a.createElement(W.b,{layout:"vertical",verticalAlign:"top",align:"right",margin:{top:0,right:0,left:50,bottom:0},content:se,payload:c.slice(0,n).map(function(e,a){return{name:e,value:l(t.reduce(function(t,a){return t+(a[e]||0)},0)),color:U[a]||"#9E9E9E"}})}),c.map(function(e,t){return r.a.createElement(W.c,{key:e,dot:!1,activeDot:{stroke:U[t]||"#9E9E9E",onClick:function(e){return o(e.dataKey,e.payload.key)}},type:"monotone",dataKey:e,stroke:U[t]||"#9E9E9E"})})))};de.defaultProps={legendLimit:10,valueFormatter:function(e){return e}};var fe=de,be=a(961),Ee=function(e){return r.a.createElement(be.a,e,e.children)},ge=a(277),he=a(499),ye=a(982),Oe=a(49),ve=a.n(Oe),je=function(e){var t=e.meta,a=t.submitting,n=t.error,o=t.touched,l=e.input,c=l.onBlur,i=l.value,u=Object(f.a)(l,["onBlur","value"]),m=e.disabled,s=Object(f.a)(e,["meta","input","disabled"]);return r.a.createElement(he.b,{utils:ge.a},r.a.createElement(ye.a,Object.assign({},s,u,{margin:"normal",variant:"inline",inputVariant:"outlined",fullWidth:!0,format:"DD/MM/YYYY",value:i?ve()(i):null,disabled:m||a,onBlur:function(){return c(i?ve()(i).format("YYYY-MM-DD"):null)},error:n&&o,onChange:function(e){e&&e.isValid()?u.onChange(e.format("YYYY-MM-DD")):u.onChange(null)}})))},xe=a(979),Se=function(e){var t=e.meta,a=t.submitting,n=t.error,o=t.touched,l=e.input,c=l.onBlur,i=l.value,u=Object(f.a)(l,["onBlur","value"]),m=e.disabled,s=Object(f.a)(e,["meta","input","disabled"]);return r.a.createElement(he.b,{utils:ge.a},r.a.createElement(xe.a,Object.assign({},s,u,{margin:"normal",variant:"inline",inputVariant:"outlined",fullWidth:!0,format:"DD/MM/YYYY HH:mm",ampm:!1,value:i?ve()(i):null,disabled:m||a,onBlur:function(){return c(i?ve()(i).format("YYYY-MM-DD HH:mm"):null)},error:n&&o,onChange:function(e){e?u.onChange(e.format("YYYY-MM-DD HH:mm")):u.onChange(null)}})))},we=a(962),Ce=a(964),ke=a(963),Ae=a(968),Te=function(e){var t=e.actions,a=e.children,n=e.open,o=e.onClose,l=e.title,c=Object(f.a)(e,["actions","children","open","onClose","title"]);return r.a.createElement(we.a,Object.assign({},c,{open:n,onClose:o}),l&&r.a.createElement(Ae.a,null,l),r.a.createElement(ke.a,null,a),t&&r.a.createElement(Ce.a,null,t))},Ie=a(969),Pe=function(e){return r.a.createElement(Ie.a,e,e.children)},Ne=a(980),Fe=a(965),Me=Object(I.a)(function(e){return{openedDrawer:{width:250},drawerPaper:{width:250,marginTop:64,overflow:"auto"}}}),De=function(e){var t=e.toggle,a=e.open,n=e.variant,o=Object(f.a)(e,["toggle","open","variant"]),l=function(){return window.innerWidth<=768},c=r.a.useState(l()),i=Object(h.a)(c,2),u=i[0],m=i[1],s=Me();return window.addEventListener("resize",function(){var e=l();e!==u&&(m(e),t(!e))}),r.a.createElement(Ne.a,Object.assign({},o,{className:a&&!u?s.openedDrawer:"",onClose:function(){return t(!1)},onOpen:function(){return t(!0)},open:a,variant:u?"temporary":n,classes:{paper:s.drawerPaper}}),r.a.createElement(Fe.a,{role:"presentation",onClick:function(){return u&&t(!1)}},o.children))};De.defaultProps={variant:"persistent"};var qe=De,_e=a(970),Ye=function(e){return r.a.createElement(_e.a,e,e.children)},Re=a(967),Be=function(e){return r.a.createElement(Re.a,Object.assign({},e,{container:!0,spacing:3}),e.children)},Ge=function(e){return r.a.createElement(Re.a,Object.assign({},e,{item:!0}),e.children)},Je=a(971),Le=function(e){return r.a.createElement(Je.a,e,e.children)},ze=a(966),He=function(e){return r.a.createElement(ze.a,e,e.children)},Ve=a(972),We=function(e){var t=e.progress,a=e.variant,n=Object(f.a)(e,["progress","variant"]);return r.a.createElement(Ve.a,Object.assign({},n,{variant:t?"determinate":a,value:t}))},Ue=a(890),Ke=a(974),Qe=a(973),Ze=function(e){var t=e.icon,a=e.primary,n=e.secondary,o=e.to;Object(f.a)(e,["icon","primary","secondary","to"]);return r.a.createElement(Ue.a,{button:!0,component:i.b,to:o},t&&r.a.createElement(Qe.a,null,t),r.a.createElement(Ke.a,{primary:a,secondary:n}))},Xe=a(986),$e=a(975),et=a(978),tt=Object(I.a)(function(e){return{chips:{display:"flex",flexWrap:"wrap",margin:"-9px -2px"},chip:{margin:2},root:{"&:focus":{background:"none"}}}}),at=function(e){var t=e.input,a=(t.onBlur,t.value),n=Object(f.a)(t,["onBlur","value"]),o=e.meta,l=o.submitting,c=(o.error,o.touched,e.multiple),i=e.options,u=e.disabled,m=Object(f.a)(e,["input","meta","multiple","options","disabled"]),s=r.a.useState(!1),p=Object(h.a)(s,2),d=p[0],b=p[1],E=tt();return r.a.createElement(et.a,Object.assign({},n,m,{select:!0,SelectProps:{classes:{root:E.root},multiple:c,renderValue:function(e){return c?r.a.createElement("div",{className:E.chips},e.map(function(e){return r.a.createElement(Xe.a,{key:e,label:i.filter(function(t){return t.value===e})[0]?i.filter(function(t){return t.value===e})[0].label:"",className:E.chip})})):i.filter(function(t){return t.value===e})[0]?i.filter(function(t){return t.value===e})[0].label:null},open:d,onOpen:function(){return b(!0)},onClose:function(){return b(!1)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null,variant:"menu"}},margin:"normal",variant:"outlined",fullWidth:!0,id:n.name,value:!a&&c?[]:a,disabled:u||l}),i.map(function(e){return r.a.createElement($e.a,{key:e.value,value:e.value},e.label)}))},nt=function(e){var t=e.meta,a=t.submitting,n=t.error,o=t.touched,l=e.input,c=(l.onBlur,l.value),i=Object(f.a)(l,["onBlur","value"]),u=e.disabled,m=Object(f.a)(e,["meta","input","disabled"]);return r.a.createElement(et.a,Object.assign({},m,i,{value:c,margin:"normal",variant:"outlined",fullWidth:!0,disabled:u||a,error:n&&o}))},rt=a(976),ot=function(e){return r.a.createElement(rt.a,e,e.children)},lt=a(981),ct=function(e){return r.a.createElement(lt.a,e,e.children)};ct.defaultProps={exclusive:!1};var it=ct,ut=function(e){var t=e.meta,a=t.submitting,n=(t.error,t.touched,e.input),o=(n.onBlur,n.value),l=n.onChange,c=(Object(f.a)(n,["onBlur","value","onChange"]),e.disabled),i=e.options,u=Object(f.a)(e,["meta","input","disabled","options"]);return r.a.createElement(it,Object.assign({},u,{value:o,onChange:l,size:"small"}),i.map(function(e){return r.a.createElement(ot,{key:e.value,value:e.value,disabled:c||a,onClick:function(){return l(e.value)}},e.label)}))},mt=a(193),st=function(e){return r.a.createElement(mt.a,e,e.children)},pt=function(e){return r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12},r.a.createElement(st,{variant:"h4"},"Dashboard")))},dt=a(36),ft=a.n(dt),bt=a(54),Et=a(501),gt=a.n(Et),ht=function(){var e=gt.a.create({baseURL:"https://146.148.62.10:1207/",timeout:0});return e.interceptors.request.use(function(e){return localStorage.getItem("apiToken")&&(e.headers.Authorization=JSON.parse(localStorage.getItem("apiToken"))||""),e},function(e){return Promise.reject(e)}),e.interceptors.response.use(function(e){return e},function(e){return e.response&&(!e.config.hasOwnProperty("errorHandle")||e.config.hasOwnProperty("errorHandle")&&!1===e.config.errorHandle)&&alert(e.response.data.error.message),Promise.reject(e.response)}),e}(),yt={login:function(){var e=Object(bt.a)(ft.a.mark(function e(t,a){return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht.post("/login",{email:t,password:a}).then(function(e){localStorage.setItem("apiToken",JSON.stringify(e.data.apiToken)),localStorage.setItem("user",JSON.stringify(e.data.user))});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),logout:function(){localStorage.removeItem("apiToken"),localStorage.removeItem("user")}},Ot=a(479),vt=a(478),jt=Object(vt.a)({form:"LoginForm"})(Object(u.b)("common")(function(e){var t=e.handleSubmit,a=e.submitting,n=e.t;Object(f.a)(e,["handleSubmit","submitting","t"]);return r.a.createElement("form",{onSubmit:t},r.a.createElement(J,null,r.a.createElement(V,null,r.a.createElement(st,{variant:"h6"},"Login"),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12},r.a.createElement(Ot.a,{label:n("email"),name:"email",component:nt,type:"email",autoFocus:!0,required:!0})),r.a.createElement(Ge,{xs:12},r.a.createElement(Ot.a,{label:n("password"),name:"password",component:nt,type:"password",required:!0})))),r.a.createElement(z,null,r.a.createElement(B,{color:"primary",type:"submit",loading:a,disabled:a},n("login")))))})),xt=Object(u.b)("common")(function(e){e.t;var t=Object(f.a)(e,["t"]);Object(n.useEffect)(function(){yt.logout()});var a=function(){var e=Object(bt.a)(ft.a.mark(function e(a){var n,r,o;return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},a),e.next=3,yt.login(n.email,n.password);case 3:r=t.location.state||{from:{pathname:"/dashboard"}},o=r.from,t.history.push(o);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(jt,{onSubmit:a})}),St=a(502),wt=a(503),Ct=a(508),kt=a(504),At=a(512),Tt=function(e){function t(){return Object(St.a)(this,t),Object(Ct.a)(this,Object(kt.a)(t).apply(this,arguments))}return Object(At.a)(t,e),Object(wt.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404"),r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,this.props.location.pathname)))}}]),t}(n.Component),It=a(505),Pt=a.n(It),Nt=function(e){return(ve.a.isMoment(e)?ve()(e):ve()()).format("YYYY-MM-DD HH:mm")},Ft=function(e){if(0===e)return"0 Bits";var t=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,t)).toFixed(2))+" "+["Bits","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"][t]},Mt=Object(u.b)("common")(function(e){var t=e.data,a=e.loading,n=e.progress,o=e.selectedItemTypes,l=e.t,c=(Object(f.a)(e,["data","loading","progress","selectedItemTypes","t"]),[{field:"flow_out",title:l("destination ip"),defaultGroupOrder:o.indexOf("ac702049-d082-4738-8efb-6593dc7c8b3d"),hidden:!o.includes("ac702049-d082-4738-8efb-6593dc7c8b3d"),customSort:function(e,t,a){return"group"===a?i(e,t,"flow_out"):e.flow_out.localeCompare(t.flow_out)},defaultGroupSort:"desc"},{field:"flow_in",title:l("source ip"),defaultGroupOrder:o.indexOf("e5419d6a-6ce7-4c83-9a85-331bfc3fab86"),grouping:!1,hidden:!o.includes("e5419d6a-6ce7-4c83-9a85-331bfc3fab86"),customSort:function(e,t,a){return"group"===a?i(e,t,"flow_in"):e.flow_in.localeCompare(t.flow_in)},defaultGroupSort:"desc"},{field:"flow_port",title:l("port"),defaultGroupOrder:o.indexOf("691c4399-ce06-4189-9133-c5455a0ec1c1"),hidden:!o.includes("691c4399-ce06-4189-9133-c5455a0ec1c1"),customSort:function(e,t,a){return"group"===a?i(e,t,"flow_port"):e.flow_port-t.flow_port},defaultGroupSort:"desc"},{field:"flow_protocol",title:l("protocol"),defaultGroupOrder:o.indexOf("80cf31d6-77b8-404d-be03-2aff2fbf4334"),hidden:!o.includes("80cf31d6-77b8-404d-be03-2aff2fbf4334"),customSort:function(e,t,a){return"group"===a?i(e,t,"flow_protocol"):e.flow_protocol.localeCompare(t.flow_protocol)},defaultGroupSort:"desc"},{field:"value",title:l("bits"),render:function(e){return Ft(8*e.value)},grouping:!1,filtering:!1}]),i=function(e,a,n){return u({data:t.filter(function(t){return t[n]===e})})-u({data:t.filter(function(e){return e[n]===a})})},u=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.groups&&t.groups.length?t.groups.reduce(function(t,a){return t+e(a,0)},0):a+t.data.reduce(function(e,t){return e+t.value},a)};return r.a.createElement(x,{title:l("Table"),columns:c,data:t,options:{filtering:!0,grouping:!0},loading:a,progress:n,components:{GroupRow:function(e){return r.a.createElement(S,Object.assign({},e,{groupData:Object(E.a)({},e.groupData,{value:r.a.createElement(r.a.Fragment,null,e.groupData.value," - ",r.a.createElement("i",null,"(",Ft(8*u(e.groupData,0)),")")),data:Object(g.a)(e.groupData.data).splice(0,100),groups:Object(g.a)(e.groupData.groups).splice(0,100)})}))}}})}),Dt=function(e){var t=e.data;Object(f.a)(e,["data"]);return r.a.createElement(J,null,r.a.createElement(V,null,r.a.createElement(fe,{data:t,height:300,valueFormatter:function(e){return Ft(8*e)}})))},qt=function(e){var t=e.defaultFilters,a=Object(f.a)(e,["defaultFilters"]),o=Object(n.useState)([]),l=Object(h.a)(o,2),c=l[0],i=l[1];return Object(n.useEffect)(function(){(function(){var e=Object(bt.a)(ft.a.mark(function e(){return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht.get("/company",{params:{filters:btoa(JSON.stringify([{type:"select",fields:["id","legalPerson.name"]},{type:"orderBy",field:"legalPerson.name",order:"ASC"}])),defaultFilters:btoa(JSON.stringify(t))}}).then(function(e){i(e.data.map(function(e){return{value:e.id,label:e.legalPerson_name}}))});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[t]),r.a.createElement(at,Object.assign({},a,{options:c}))};qt.defaultProps={defaultFilters:[]};var _t=qt,Yt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),o=a[0],l=a[1],c=function(){var e=Object(bt.a)(ft.a.mark(function e(){return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht.get("/equipment",{params:{filters:btoa(JSON.stringify([{type:"select",fields:["id","name","company.legalPerson.name"]},{type:"orderBy",field:"name",order:"ASC"}]))}}).then(function(e){l(e.data.map(function(e){return{value:e.id,label:"".concat(e.name," (").concat(e.company_legalPerson_name,")")}}))});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){c()},[]),r.a.createElement(at,Object.assign({},e,{options:o}))},Rt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),o=a[0],l=a[1],c=function(){var e=Object(bt.a)(ft.a.mark(function e(){return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht.get("/group",{params:{filters:btoa(JSON.stringify([{type:"select",fields:["id","name"]},{type:"orderBy",field:"name",order:"ASC"}]))}}).then(function(e){l(e.data.map(function(e){return{value:e.id,label:e.name}}))});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){c()},[]),r.a.createElement(at,Object.assign({},e,{options:o}))},Bt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),o=a[0],l=a[1],c=function(){var e=Object(bt.a)(ft.a.mark(function e(){return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht.get("/item-type",{params:{filters:btoa(JSON.stringify([{type:"select",fields:["id","name"]},{type:"orderBy",field:"name",order:"ASC"}]))}}).then(function(e){var t=e.data.map(function(e){return{value:e.id,label:e.name}});l(t)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){c()},[]),r.a.createElement(at,Object.assign({},e,{options:o}))},Gt=Object(vt.a)({initialValues:{type:"AdvancedGraphic",interval:"1-hour"}})(Object(u.b)("common")(function(e){var t=e.closable,a=e.closeReport,o=e.handleSubmit,l=e.loading,i=e.t,u=e.form,m=Object(f.a)(e,["closable","closeReport","handleSubmit","loading","t","form"]),s=Object(c.d)(function(e){return e.form[u].values}),p=Object(n.useState)(!0),d=Object(h.a)(p,2),b=d[0],E=d[1],y=Object(n.useState)([{}]),O=Object(h.a)(y,2),v=O[0],j=O[1];return Object(n.useEffect)(function(){var e,t,a={},n={};s.startDate||(a=function(e){var t=ve.a.isMoment(e)?ve()(e):ve()(),a=t.minutes()-t.minutes()%5;return t.set({minute:a,second:0})}(),e=a,t=5,a=function(e,t){return(ve.a.isMoment(e)?ve()(e):ve()()).subtract(t,"hours")}(a=(ve.a.isMoment(e)?ve()(e):ve()()).subtract(t,"minutes"),5),s.startDate=Nt(a),n=function(e,t){return(ve.a.isMoment(e)?ve()(e):ve()()).add(t,"hours")}(a,5),s.endDate=Nt(n))},[s.startDate,s.endDate,s]),r.a.createElement("form",{onSubmit:o},r.a.createElement(J,null,r.a.createElement(V,null,r.a.createElement(Be,null,r.a.createElement(Ge,{xs:"auto"},r.a.createElement(He,{size:"small",onClick:function(){return E(!b)}},r.a.createElement(Le,null,b?"keyboard_arrow_up":"keyboard_arrow_down"))),r.a.createElement(Ge,{xs:!0},r.a.createElement(st,{variant:"h6"},i("report"))),t&&r.a.createElement(Ge,{xs:"auto"},r.a.createElement(He,{size:"small",onClick:a},r.a.createElement(Le,null,"close"))))),r.a.createElement(Ee,{in:b},r.a.createElement(V,null,r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12},r.a.createElement(Ot.a,{name:"type",component:ut,disabled:l,onChange:function(){m.change("itemType",null)},options:[{value:"AdvancedGraphic",label:i("Graphic")},{value:"AdvancedTable",label:i("Table")}]})),r.a.createElement(Ge,{xs:12,md:12,lg:3},r.a.createElement(Ot.a,{label:i("equipment"),name:"equipment",component:Yt,required:!0,autoFocus:!0,disabled:l})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:i("start date"),name:"startDate",component:Se,minutesStep:5,required:!0,disabled:l,disableFuture:!0})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:i("end date"),name:"endDate",component:Se,minutesStep:5,disabled:l})),("Graphic"===s.type||"AdvancedGraphic"===s.type)&&r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:i("interval"),name:"interval",component:at,disabled:l,options:[{value:"5-minutes",label:i("5 minutes")},{value:"10-minutes",label:i("10 minutes")},{value:"30-minutes",label:i("30 minutes")},{value:"1-hour",label:i("hour")},{value:"3-hour",label:i("3 hours")},{value:"6-hour",label:i("6 hours")},{value:"12-hour",label:i("12 hours")},{value:"1-day",label:i("day")},{value:"1-week",label:i("week")},{value:"1-month",label:i("month")}]}))),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12,md:12,lg:6},r.a.createElement(Ot.a,{label:i("show data"),name:"itemType",component:Bt,multiple:"AdvancedTable"===s.type,required:!0,disabled:l}))),("AdvancedTable"===s.type||"AdvancedGraphic"===s.type)&&v.map(function(e,t){return r.a.createElement(Be,{key:t},r.a.createElement(Ge,{xs:12,md:3,lg:3},r.a.createElement(Ot.a,{label:i("item type"),name:"itemType"+t,component:Bt,disabled:l})),r.a.createElement(Ge,{xs:12,md:9,lg:3},r.a.createElement(Ot.a,{label:i("filter"),name:"filterItemType"+t,component:nt,disabled:l})),t>0&&v.length===t+1&&r.a.createElement(Ge,null,r.a.createElement(Ye,{size:"small",color:"inherit",disabled:l,onClick:function(){return j(function(e){console.log(e+" - Before: "+v);var t=Object(g.a)(v),a="filterItemType"+e;return s["itemType"+e]=void 0,s[a]=void 0,t.splice(e,1),t}(t))}},r.a.createElement(Le,null,"remove"))),v.length<4&&v.length===t+1&&r.a.createElement(Ge,null,r.a.createElement(Ye,{size:"small",color:"inherit",disabled:l,onClick:function(){return j([].concat(Object(g.a)(v),[{}]))}},r.a.createElement(Le,null,"add"))))})),r.a.createElement(z,null,r.a.createElement(B,{color:"primary",type:"submit",disabled:l,loading:l},"Generate")))))})),Jt=Pt()("http://146.148.62.10:1204/",{query:{token:JSON.parse(localStorage.getItem("apiToken"))},reconnectionDelay:2e3,reconnectionDelayMax:3e4,timeout:36e4}),Lt=Object(u.b)("common")(function(e){var t=e.closable,a=e.closeReport,o=e.reportId,l=(e.t,Object(f.a)(e,["closable","closeReport","reportId","t"]),Object(n.useState)([])),c=Object(h.a)(l,2),i=c[0],u=c[1],m=Object(n.useState)(!1),s=Object(h.a)(m,2),p=s[0],d=s[1],b=Object(n.useState)("Graphic"),y=Object(h.a)(b,2),O=y[0],v=y[1],j=Object(n.useState)([]),x=Object(h.a)(j,2),S=x[0],w=x[1];Object(n.useEffect)(function(){Jt.on("connect",function(){console.log("Connected")}),Jt.on("disconnect",function(){console.log("Disconnected")}),Jt.on("errorReportExecution",function(e){console.log("errorReportExecution"),console.log(e)}),Jt.on("connect_error",function(e){console.log("connect_error"),console.log(e)}),Jt.on("returnReport",function(e){e.reportId===o&&(d(!1),u(function(t){return e.data}))})},[o]);var C=function(){var e=Object(bt.a)(ft.a.mark(function e(t,a){var n;return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.equipment){e.next=4;break}return alert("Selecione um equipamento"),e.abrupt("return");case 4:if(t.itemType&&0!==t.itemType.length){e.next=7;break}return alert("Selecione pelo menos um tipo de item para mostrar"),e.abrupt("return");case 7:if(!("AdvancedTable"===t.type&&t.itemType&&t.itemType.length>2)){e.next=10;break}return alert("Voc\xea deve selecionar apenas 2 tipos de dados para mostrar"),e.abrupt("return");case 10:if("AdvancedTable"!==t.type&&"AdvancedGraphic"!==t.type){e.next=47;break}if(t.nfdumpFilters=[],!t.itemType0){e.next=19;break}if(!t.filterItemType0){e.next=17;break}t.nfdumpFilters.push({itemType:t.itemType0,filter:t.filterItemType0}),e.next=19;break;case 17:return alert("Ao escolher um tipo de item , digite um filtro"),e.abrupt("return");case 19:if(!t.itemType1){e.next=26;break}if(!t.filterItemType1){e.next=24;break}t.nfdumpFilters.push({itemType:t.itemType1,filter:t.filterItemType1}),e.next=26;break;case 24:return alert("Ao escolher um tipo de item , digite um filtro"),e.abrupt("return");case 26:if(!t.itemType2){e.next=33;break}if(!t.filterItemType2){e.next=31;break}t.nfdumpFilters.push({itemType:t.itemType2,filter:t.filterItemType2}),e.next=33;break;case 31:return alert("Ao escolher um tipo de item , digite um filtro"),e.abrupt("return");case 33:if(!t.itemType3){e.next=40;break}if(!t.filterItemType3){e.next=38;break}t.nfdumpFilters.push({itemType:t.itemType3,filter:t.filterItemType3}),e.next=40;break;case 38:return alert("Ao escolher um tipo de item , digite um filtro"),e.abrupt("return");case 40:d(!0),v(t.type),n=Object(g.a)(t.itemType),w(n),console.log(t),Jt.emit("generateReport",{reportId:o,filters:Object(E.a)({limit:10},t)}),u([]);case 47:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12},r.a.createElement(Gt,{closable:t,closeReport:function(){return a(o)},onSubmit:function(e){return C(e,o)},loading:p,form:"reportFilterForm-".concat(o)})),(!!i.length||p)&&r.a.createElement(Ge,{xs:12},"AdvancedTable"===O&&r.a.createElement(Mt,{data:i,loading:p,selectedItemTypes:S}),"AdvancedGraphic"===O&&r.a.createElement(Dt,{data:i,loading:p,selectedItemTypes:S})))});function zt(){var e=Object(K.a)(["\n  display: flex;\n  align-items: center;\n"]);return zt=function(){return e},e}function Ht(){var e=Object(K.a)(["\n  flex-grow: 1;\n"]);return Ht=function(){return e},e}var Vt=Object(Q.a)(Pe)(Ht()),Wt=Object(Q.a)(Ge)(zt()),Ut=Object(u.b)("common")(function(e){e.t,Object(f.a)(e,["t"]);var t=Object(n.useState)([!0]),a=Object(h.a)(t,2),o=a[0],l=a[1],c=function(e){l(o.map(function(t,a){return e!==a&&t}))},i=o.filter(function(e){return e}).length;return r.a.createElement(Be,null,o.map(function(e,t){return r.a.createElement(n.Fragment,{key:t},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{xs:12},r.a.createElement(Lt,{reportId:t,closable:i>1,closeReport:c})),t+1<i&&r.a.createElement(Wt,{xs:12},r.a.createElement(Vt,null))))}),r.a.createElement(Ge,null,r.a.createElement(Ye,{size:"small",color:"primary",onClick:function(){return l([].concat(Object(g.a)(o),[!0]))}},r.a.createElement(Le,null,"add"))),r.a.createElement(Wt,{xs:!0},r.a.createElement(Vt,null)))}),Kt=Object(u.b)("common")(function(e){var t=e.t,a=Object(f.a)(e,["t"]),o=Object(n.useState)([]),l=Object(h.a)(o,2),c=l[0],i=l[1],u=Object(n.useState)([]),m=Object(h.a)(u,2),s=m[0],p=m[1],d=JSON.parse(localStorage.getItem("user")),b=[{field:"company.legalPerson.name",title:t("company"),hidden:"COMPANY_CLIENT"===d.company.type},{field:"name",title:t("name")},{field:"ip",title:t("ip")},{field:"equipmentType.name",title:t("equipment type")},{field:"isActive",title:t("is active"),type:"boolean"}],E=[{icon:"edit",tooltip:t("edit"),onClick:function(e,t){a.history.push("/equipment/edit/"+t.id)}}];return Object(n.useEffect)(function(){p(!0),ht.get("/equipment",{params:{filters:btoa(JSON.stringify([{type:"orderBy",field:"name",order:"ASC"}])),toArray:btoa(JSON.stringify({only:["id","name","equipmentType","isActive","ip","company"],toArrayEquipmentType:{only:["id","name"]},toArrayCompany:{only:["id","legalPerson"],toArrayLegalPerson:{only:["id","name"]}}}))}}).then(function(e){i(e.data),p(!1)})},[]),r.a.createElement(x,{actions:E,title:t("equipments"),columns:b,data:c,loading:s})}),Qt=a(187),Zt=a(475),Xt=function(e){e.autofocus;var t=e.title,a=e.t;Object(f.a)(e,["autofocus","title","t"]);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(q,{mt:3},r.a.createElement(st,{variant:"subtitle2"},t)),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:a("type"),name:"type",component:at,options:[{value:"COMPANY_MASTER",label:a("administrator")},{value:"COMPANY_RESALE",label:a("resale")},{value:"COMPANY_CLIENT",label:a("client")}]})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:a("resale"),name:"company",component:_t,required:!0}))))};Xt.defaultProps={autofocus:!1,title:null};var $t=Object(u.b)("common")(Xt),ea=function(e){var t=e.autofocus,a=e.title,n=e.t;Object(f.a)(e,["autofocus","title","t"]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(q,{mt:3},r.a.createElement(st,{variant:"subtitle2"},a)),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("name"),name:"name",component:nt,required:!0,autoFocus:t})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("observation"),name:"observation",component:nt}))))};ea.defaultProps={autofocus:!1,title:null};var ta=Object(u.b)("common")(ea),aa=function(e){var t=e.autofocus,a=e.title,n=e.t;Object(f.a)(e,["autofocus","title","t"]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(q,{mt:3},r.a.createElement(st,{variant:"subtitle2"},a)),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("name"),name:"name",component:nt,required:!0,autoFocus:t})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("cnpj"),name:"cnpj",component:nt,required:!0})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("ie"),name:"ie",component:nt,required:!0}))))};aa.defaultProps={autofocus:!1,title:null};var na=Object(u.b)("common")(aa),ra=function(e){var t=e.autofocus,a=e.title,n=e.t;Object(f.a)(e,["autofocus","title","t"]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(q,{mt:3},r.a.createElement(st,{variant:"subtitle2"},a)),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("name"),name:"name",component:nt,required:!0,autoFocus:t})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("cpf"),name:"cpf",component:nt})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("rg"),name:"rg",component:nt})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("birthdate"),name:"birthdate",component:je})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("gender"),name:"gender",component:at,options:[{value:"MASCULINO",label:"Masculino"},{value:"FEMININO",label:"Feminino"}]})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:n("marital status"),name:"maritalStatus",component:at,options:[{value:"CASADO",label:"Casado"},{value:"SOLTEIRO",label:"Solteiro"}]}))))};ra.defaultProps={autofocus:!1,title:null};var oa=Object(u.b)("common")(ra),la=function(e){var t=e.autofocus,a=e.showCompanySelect,n=e.title,o=e.t;Object(f.a)(e,["autofocus","showCompanySelect","title","t"]);return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(q,{mt:3},r.a.createElement(st,{variant:"subtitle2"},n)),r.a.createElement(Be,null,a&&r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:o("company"),name:"companies",component:_t,multiple:!0,required:!0,autoFocus:t})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:o("groups"),name:"groups",component:Rt,multiple:!0}))),r.a.createElement(Be,null,r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:o("email"),name:"email",component:nt,type:"email",required:!0})),r.a.createElement(Ge,{xs:12,md:4,lg:3},r.a.createElement(Ot.a,{label:o("password"),name:"plainPassword",component:nt,type:"password"}))))};la.defaultProps={autofocus:!1,showCompanySelect:!0,title:null};var ca=Object(u.b)("common")(la),ia=Object(vt.a)({form:"EquipmentForm",enableReinitialize:!0})(Object(u.b)("common")(function(e){var t=e.handleSubmit,a=(e.loading,e.t);Object(f.a)(e,["handleSubmit","loading","t"]);return r.a.createElement("form",{onSubmit:t},r.a.createElement(J,null,r.a.createElement(V,null,r.a.createElement(st,{variant:"h6"},a("equipment")),r.a.createElement(Zt.a,{name:"",component:ta})),r.a.createElement(z,null,r.a.createElement(B,{color:"primary",type:"submit"},a("save")))))})),ua=Object(u.b)("common")(function(e){var t=Object(Qt.a)({},e),a=Object(n.useState)({}),o=Object(h.a)(a,2),l=o[0],c=o[1],i=t.match.params.id,u=function(){var e=Object(bt.a)(ft.a.mark(function e(a){var n;return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},a),e.next=3,ht.put("/equipment/".concat(i),n);case 3:200===e.sent.status&&t.history.push("/equipment");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){ht.get("/equipment/".concat(i),{params:{toArray:btoa(JSON.stringify({only:["id","name","observation","ip","equipmentType.name"]}))}}).then(function(e){c(Object(E.a)({},e.data))})},[i]),r.a.createElement(ia,{onSubmit:u,initialValues:l})}),ma=Object(u.b)("common")(function(e){var t=e.t,a=Object(f.a)(e,["t"]),o=Object(n.useState)([]),l=Object(h.a)(o,2),c=l[0],i=l[1],u=Object(n.useState)([]),m=Object(h.a)(u,2),s=m[0],p=m[1],d=JSON.parse(localStorage.getItem("user")),b=[{field:"legalPerson_name",title:t("name")},{field:"type",title:t("type"),lookup:{COMPANY_MASTER:t("administrator"),COMPANY_CLIENT:t("client"),COMPANY_RESALE:t("resale")}}],E=[{icon:"edit",tooltip:t("edit"),onClick:function(e,t){a.history.push("/company/edit/"+t.id)}},{icon:"delete",tooltip:t("delete"),onClick:function(e,t){window.confirm("Tem certeza que deseja excluir?")&&(p(!0),ht.delete("/company/"+t.id).then(function(e){i(c.filter(function(e){return e.id!==t.id})),p(!1)}))}},{icon:"add",tolltip:t("add"),isFreeAction:!0,hidden:"COMPANY_CLIENT"===d.company.type,onClick:function(){a.history.push("/company/new")}}];return Object(n.useEffect)(function(){p(!0),ht.get("/company",{params:{filters:btoa(JSON.stringify([{type:"select",fields:["id","legalPerson.name","type","company.id"]},{type:"orderBy",field:"legalPerson.name",order:"ASC"}]))}}).then(function(e){i(e.data),p(!1)})},[]),r.a.createElement(x,{actions:E,title:t("companies"),columns:b,data:c,loading:s,parentChildData:function(e,t){return t.find(function(t){return t.id===e.company_id})}})}),sa=Object(vt.a)({form:"CompanyForm",enableReinitialize:!0})(Object(u.b)("common")(function(e){var t=e.handleSubmit,a=(e.loading,e.initialValues),n=e.t;Object(f.a)(e,["handleSubmit","loading","initialValues","t"]);return r.a.createElement("form",{onSubmit:t},r.a.createElement(J,null,r.a.createElement(V,null,r.a.createElement(st,{variant:"h6"},n("company register")),r.a.createElement(Zt.a,{title:n("company data"),name:a.id?"legalPerson":"companies[0].legalPerson",component:na,autofocus:!0}),r.a.createElement(Zt.a,{name:a.id?"":"companies[0]",component:$t}),!a.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Zt.a,{title:n("personal data"),name:"physicalPerson",component:oa,showCompanySelect:!1}),r.a.createElement(Zt.a,{title:n("user data"),name:"",component:ca,showCompanySelect:!1}))),r.a.createElement(z,null,r.a.createElement(B,{color:"primary",type:"submit"},n("save")))))})),pa=Object(u.b)("common")(function(e){var t=Object(Qt.a)({},e),a=Object(n.useState)({}),o=Object(h.a)(a,2),l=o[0],c=o[1],i=t.match.params.id,u=JSON.parse(localStorage.getItem("user")),m=function(){var e=Object(bt.a)(ft.a.mark(function e(a){var n,r;return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object.assign({},a),!i){e.next=7;break}return e.next=4,ht.put("/company/".concat(i),n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,ht.post("/user",n);case 9:r=e.sent;case 10:200===r.status&&t.history.push("/company");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){i&&ht.get("/company/".concat(i),{params:{toArray:btoa(JSON.stringify({only:["id","legalPerson","type","company"],toArrayLegalPerson:{only:["id","name","cnpj","ie"]}}))}}).then(function(e){c(e.data)})},[i]),r.a.createElement(sa,{onSubmit:m,initialValues:i?l:{companies:[{type:"COMPANY_MASTER"===u.company.type?"COMPANY_RESALE":"COMPANY_CLIENT",company:u.company.id}]}})}),da=Object(u.b)("common")(function(e){var t=e.t,a=Object(f.a)(e,["t"]),o=Object(n.useState)([]),l=Object(h.a)(o,2),c=l[0],i=l[1],u=Object(n.useState)([]),m=Object(h.a)(u,2),s=m[0],p=m[1],d=[{field:"physicalPerson.name",title:t("name")},{field:"email",title:t("email")}],b=[{icon:"edit",tooltip:t("edit"),onClick:function(e,t){a.history.push("/user/edit/"+t.id)}},{icon:"delete",tooltip:t("delete"),onClick:function(e,t){window.confirm("Tem certeza que deseja excluir?")&&(p(!0),ht.delete("/user/"+t.id).then(function(e){i(c.filter(function(e){return e.id!==t.id})),p(!1)}))}},{icon:"add",tolltip:t("add"),isFreeAction:!0,onClick:function(){a.history.push("/user/new")}}];return Object(n.useEffect)(function(){p(!0),ht.get("/user",{params:{filters:btoa(JSON.stringify([{type:"orderBy",field:"physicalPerson.name",order:"ASC"}])),toArray:btoa(JSON.stringify({only:["id","email","physicalPerson"],toArrayPhysicalPerson:{only:["name","cpf"]}}))}}).then(function(e){i(e.data),p(!1)})},[]),r.a.createElement(x,{actions:b,title:t("users"),columns:d,data:c,loading:s})}),fa=Object(vt.a)({form:"UserForm",enableReinitialize:!0})(Object(u.b)("common")(function(e){var t=e.handleSubmit,a=(e.loading,e.t);Object(f.a)(e,["handleSubmit","loading","t"]);return r.a.createElement("form",{onSubmit:t},r.a.createElement(J,null,r.a.createElement(V,null,r.a.createElement(st,{variant:"h6"},a("user")),r.a.createElement(Zt.a,{title:a("personal data"),name:"physicalPerson",component:oa}),r.a.createElement(Zt.a,{title:a("user data"),name:"",component:ca})),r.a.createElement(z,null,r.a.createElement(B,{color:"primary",type:"submit"},a("save")))))})),ba=Object(u.b)("common")(function(e){var t=Object(Qt.a)({},e),a=Object(n.useState)({}),o=Object(h.a)(a,2),l=o[0],c=o[1],i=t.match.params.id,u=function(){var e=Object(bt.a)(ft.a.mark(function e(a){var n,r;return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(E.a)({},Object.assign({},a),{companies:[a.companies],groups:a.grous?[a.groups]:null}),!i){e.next=7;break}return e.next=4,ht.put("/user/".concat(i),n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,ht.post("/user",n);case 9:r=e.sent;case 10:200===r.status&&t.history.push("/user");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){i&&ht.get("/user/".concat(i),{params:{toArray:btoa(JSON.stringify({only:["id","email","physicalPerson","groups","companies"],toArrayPhysicalPerson:{only:["name","cpf","rg","birthdate","gender","maritalStatus"]}}))}}).then(function(e){c(Object(E.a)({},e.data))})},[i]),r.a.createElement(fa,{onSubmit:u,initialValues:l})}),Ea=a(511),ga=a(86),ha=function(e){var t=e.children,a=e.dispatch,n=e.formName;Object(f.a)(e,["children","dispatch","formName"]);return r.a.createElement(B,{type:n?"button":"submit",color:"primary",onClick:function(){return a(Object(ga.a)(n))}},t)};ha.defaultProps={formName:""};var ya=Object(c.b)()(ha),Oa=Object(vt.a)({form:"SwitchCompanyForm",enableReinitialize:!0})(Object(u.b)("common")(function(e){var t=e.handleSubmit,a=e.open,n=e.onClose,o=e.t;Object(f.a)(e,["handleSubmit","open","onClose","t"]);return r.a.createElement(Te,{open:a,onClose:n,title:o("switch company"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{variant:"text",onClick:n},o("cancel")),r.a.createElement(ya,{formName:"SwitchCompanyForm"},o("save"))),fullWidth:!0,maxWidth:"xs"},r.a.createElement("form",{onSubmit:t},r.a.createElement(Ot.a,{label:o("company"),name:"company",component:_t,defaultFilters:{company:!1},required:!0})))})),va=function(e){var t=e.open,a=e.onClose,n=(Object(f.a)(e,["open","onClose"]),JSON.parse(localStorage.getItem("user"))),o=function(){var e=Object(bt.a)(ft.a.mark(function e(t){var a;return ft.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=JSON.parse(localStorage.getItem("user")),e.next=4,ht.put("/user/".concat(a.id),{company:t.company},{params:{defaultFilters:btoa(JSON.stringify({company:!1}))}}).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),window.location.reload()});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Oa,{open:t,onClose:a,onSubmit:o,initialValues:{company:n.company.id}})};function ja(){var e=Object(K.a)(["\n  display: flex;\n  flex-direction: column;\n  line-height: 14px;\n  align-items: start;\n"]);return ja=function(){return e},e}var xa=Q.a.div(ja()),Sa=Object(u.b)("common")(function(e){var t=e.t,a=(Object(f.a)(e,["t"]),Object(n.useState)(null)),o=Object(h.a)(a,2),l=o[0],c=o[1],u=Object(n.useState)(!1),m=Object(h.a)(u,2),s=m[0],p=m[1],d=JSON.parse(localStorage.getItem("user"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{variant:"text",color:"inherit",icon:r.a.createElement(Le,null,"account_circle"),"aria-controls":"profile-menu","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)}},r.a.createElement(xa,null,r.a.createElement("div",null,d.physicalPerson.name),r.a.createElement("small",null,d.company.legalPerson.name))),r.a.createElement(Ea.a,{id:"profile-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:function(){return c(null)}},r.a.createElement($e.a,{onClick:function(){p(!0),c(null)}},t("switch company")),r.a.createElement($e.a,{component:i.b,to:"/login"},t("logout"))),r.a.createElement(va,{open:s,onClose:function(){return p(!1)}}))}),wa=function(e){var t=Object(c.c)(),a=Object(c.d)(function(e){return e.drawer});return r.a.createElement(T,null,r.a.createElement(N,null,r.a.createElement(He,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e=!a.open,void t({type:"CHANGE_DRAWER_VISIBILITY",open:e});var e}},r.a.createElement(Le,null,"menu")),r.a.createElement(st,{variant:"h6"},"OWLMO")),r.a.createElement(M,null,r.a.createElement(Sa,null)))},Ca=[{name:"Dashboard",path:"/dashboard"},{name:"Relat\xf3rio",path:"/report"},{name:"Equipamentos",path:"/equipment"},{name:"Empresas",path:"/company"},{name:"Usu\xe1rios",path:"/user"}],ka=function(e){var t=Object(c.c)(),a=Object(c.d)(function(e){return e.drawer});return r.a.createElement(qe,{open:a.open,toggle:function(e){return function(e){t({type:"CHANGE_DRAWER_VISIBILITY",open:e})}(e)}},Ca.map(function(e,t){return r.a.createElement(Ze,{key:t,primary:e.name,to:e.path})}))};function Aa(){var e=Object(K.a)(["\n  flex-grow: 1;\n  margin-top: 64px;\n  padding: 12px;\n"]);return Aa=function(){return e},e}function Ta(){var e=Object(K.a)(["\n  display: flex;\n"]);return Ta=function(){return e},e}var Ia=Q.a.div(Ta()),Pa=Q.a.div(Aa()),Na=function(e){return r.a.createElement(Ia,null,r.a.createElement(wa,null),r.a.createElement(ka,null),r.a.createElement(Pa,null,e.children))},Fa=function(e){var t=e.component,a=Object(f.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return localStorage.getItem("apiToken")||localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(b.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ma=function(){return r.a.createElement(b.d,null,r.a.createElement(b.b,{path:["/","/dashboard"],exact:!0,component:pt}),r.a.createElement(b.b,{path:"/report",exact:!0,component:Ut}),r.a.createElement(b.b,{path:"/equipment",exact:!0,component:Kt}),r.a.createElement(b.b,{path:"/equipment/edit/:id",exact:!0,component:ua}),r.a.createElement(b.b,{path:"/company",exact:!0,component:ma}),r.a.createElement(b.b,{path:"/company/new",exact:!0,component:pa}),r.a.createElement(b.b,{path:"/company/edit/:id",exact:!0,component:pa}),r.a.createElement(b.b,{path:"/user",exact:!0,component:da}),r.a.createElement(b.b,{path:"/user/new",exact:!0,component:ba}),r.a.createElement(b.b,{path:"/user/edit/:id",exact:!0,component:ba}),r.a.createElement(b.b,{path:"*",component:Tt}))},Da=function(){return r.a.createElement(Na,null,r.a.createElement(b.b,{path:"/",component:Ma}))},qa=function(){return r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/login",component:xt}),r.a.createElement(Fa,{path:"/",component:Da}))},_a=a(48),Ya={open:!0},Ra="CHANGE_DRAWER_VISIBILITY",Ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ra:return Object(E.a)({},e,{open:t.open});default:return e}},Ga=a(481),Ja=Object(_a.c)({drawer:Ba,form:Ga.a}),La=Object(_a.e)(Ja),za={interpolation:{escapeValue:!1},lng:"pt_BR",resources:{pt_BR:{common:a(506)}}};m.a.init(za);var Ha=Object(d.a)({palette:{primary:{main:"#212121"},secondary:{main:"#3F51B5"},background:{default:"#ffffff"}}}),Va=function(e){return r.a.createElement(c.a,{store:La},r.a.createElement(p.a,{theme:Ha},r.a.createElement(u.a,{i18n:m.a},r.a.createElement(s.a,null),r.a.createElement(i.a,null,r.a.createElement(qa,null)))))};l.a.render(r.a.createElement(Va,null),document.querySelector("#root"))}},[[585,1,2]]]);
//# sourceMappingURL=main.7a8a659f.chunk.js.map